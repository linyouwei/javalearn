package org.tarena.service;

import java.sql.Timestamp;
import java.util.HashMap;
import java.util.Map;
import java.util.UUID;

import javax.annotation.Resource;
import javax.servlet.http.HttpSession;
import org.springframework.stereotype.Service;
import org.tarena.dao.UserMapper;
import org.tarena.entity.User;
import org.tarena.util.Md5Util;
import org.tarena.util.SystemConstant;

@Service
public class LoginService implements SystemConstant{
	@Resource
	private UserMapper userMapper;	
	public Map<String,Object> addUser(User user){
		if(user==null){
			throw new RuntimeException("参数为空");
		}
		//判斷是否有重名
		User user_name = userMapper.findByName(user.getCn_user_name());
		Map<String,Object> map = new HashMap<String,Object>(); 
		if(user_name==null){
			//若數據庫沒有該數據，插入數據庫
			user.setCn_user_id(UUID.randomUUID().toString());
			user.setCn_user_password(Md5Util.md5(user.getCn_user_password()));
			System.out.println(user.getCn_user_id());
			System.out.println("1");
			userMapper.save(user);
			System.out.println(user.getCn_user_id());
			System.out.println(user.getCn_user_id());
			map.put("pass", true);
		}else{
			//若數據庫有該數據返回錯誤提示
			map.put("pass", false);
			
		}
		return map;
		
	}

}
